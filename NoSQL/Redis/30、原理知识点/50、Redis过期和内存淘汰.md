## [原文](http://www.redis.cn/articles/20181020002.html)

# Redis过期和内存淘汰


## Redis存储数据时我们可以设置他的过期时间。但是这个key是怎么删除的呢？


一开始我认为是定时删除，后来发现并不是这样，因为如果定时删除，需要一个定时器来不断的负责监控这个key，虽然内存释放了，但是非常消耗cpu资源。


Redis过期删除采用的是`定期删除+惰性删除`，默认是每100ms检测一次，遇到过期的key则进行删除，这里的检测并不是顺序检测，而是随机检测。
那这样会不会有漏网之鱼？  
显然Redis也考虑到了这一点，当我们去读/写一个已经过期的key时，会触发Redis的惰性删除策略，直接回干掉过期的key


内存淘汰是指用户存储的一部分key是可以被Redis自动的删除，从而会出现从缓存中查不到数据的情况。
假如我们的服务器内存为2G、但是随着业务的发展缓存的数据已经超过2G了。但是这并不影响我们程序的运行，
因为操作系统的可见内存并不受物理内存的限制。物理内存不够用没关系，计算机会从硬盘中划出一片空间来作为虚拟内存。
这就是Redis设计两种应用场景的初衷：缓存、持久存储