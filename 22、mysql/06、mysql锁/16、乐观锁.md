

# 乐观锁

在关系数据库管理系统里，乐观并发控制（又名“乐观锁”，Optimistic Concurrency Control，缩写“OCC”）是一种并发控制的方法；
乐观锁（ Optimistic Locking ） 是相对悲观锁而言，乐观锁是`假设认为即使在并发环境中，
外界对数据的操作一般是不会造成冲突`，所以并不会去加锁(所以乐观锁不是一把锁)，
而是在数据进行提交更新的时候，才会正式对数据的冲突与否进行检测，如果发现冲突了，
则让返回冲突信息，让用户决定如何去做下一步，比如说重试，直至成功为止；

数据库的乐观锁，并不是利用数据库本身的锁去实现的，
可能是利用某种实现逻辑去实现做到乐观锁的思想（CAS思想）
 
- 使用数据版本（version）实现
- 使用时间戳(timestamp)实现


## 什么是悲观锁？
在关系数据库管理系统里，悲观并发控制（又名“悲观锁”，Pessimistic Concurrency Control，缩写“PCC”）
是一种并发控制的方法; 悲观锁指的是采用一种持悲观消极的态度，`默认数据被外界访问时，必然会产生冲突`，
所以在数据处理的整个过程中都采用加锁的状态，保证同一时间，只有一个线程可以访问到数据，
实现数据的排他性；通常，数据库的悲观锁是利用数据库本身提供的锁机制去实现的.



说白了快照读就是MVCC思想在MySQL的具体非阻塞读功能实现，
整个MVCC多并发控制的目的就是为了实现读-写冲突不加锁，提高并发读写性能，
而这个读指的就是快照读, `而非`当前读，当前读实际上是一种加锁的操作，是悲观锁的实现



