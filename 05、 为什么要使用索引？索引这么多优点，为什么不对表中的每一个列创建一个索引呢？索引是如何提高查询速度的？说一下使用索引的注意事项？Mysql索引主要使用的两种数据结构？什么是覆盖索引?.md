
## [原文](https://github.com/Snailclimb/JavaGuide/blob/master/%E9%9D%A2%E8%AF%95%E5%BF%85%E5%A4%87/%E7%BE%8E%E5%9B%A2-%E5%9F%BA%E7%A1%80%E7%AF%87.md#4-tcp-%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E5%92%8C%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B)

#  为什么要使用索引？索引这么多优点，为什么不对表中的每一个列创建一个索引呢？索引是如何提高查询速度的？说一下使用索引的注意事项？Mysql索引主要使用的两种数据结构？什么是覆盖索引?

## 为什么要使用索引？

1. 通过创建唯一性索引，可以保证数据库表中每一行数据的唯一性。

2. 可以大大加快 数据的检索速度（大大减少的检索的数据量）, 这也是创建索引的最主要的原因。

3. 帮助服务器避免排序和临时表

4. 将随机IO变为顺序IO

5. 可以加速表和表之间的连接，特别是在实现数据的参考完整性方面特别有意义。

## 索引这么多优点，为什么不对表中的每一个列创建一个索引呢？

1. 当对表中的数据进行增加、删除和修改的时候，索引也要动态的维护，这样就降低了数据的维护速度。

2. 索引需要占物理空间，除了数据表占数据空间之外，每一个索引还要占一定的物理空间，
如果要建立聚簇索引，那么需要的空间就会更大。

3. 创建索引和维护索引要耗费时间，这种时间随着数据量的增加而增加。

## 索引是如何提高查询速度的？

将无序的数据变成相对有序的数据（就像查目录一样）

## 说一下使用索引的注意事项

1. 避免 where 子句中对宇段施加函数，这会造成无法命中索引。

2. 在使用InnoDB时使用与业务无关的自增主键作为主键，即使用逻辑主键，而不要使用业务主键。

3. 将打算加索引的列设置为 NOT NULL ，否则将导致引擎放弃使用索引而进行全表扫描

4. 删除长期未使用的索引，
不用的索引的存在会造成不必要的性能损耗 MySQL 5.7 可以通过查询 sys 库的 chema_unused_indexes 视图来查询哪些索引从未被使用

5. 在使用 limit offset 查询缓慢时，可以借助索引来提高性能

## Mysql索引主要使用的哪两种数据结构？

1. 哈希索引：对于哈希索引来说，底层的数据结构就是哈希表，
因此在绝大多数需求为单条记录查询的时候，可以选择哈希索引，
查询性能最快；其余大部分场景，建议选择BTree索引。

2. BTree索引：Mysql的BTree索引使用的是B树中的B+Tree。
但对于主要的两种存储引擎（MyISAM和InnoDB）的实现方式是不同的。

更多关于索引的内容可以查看我的这篇文章：[数据库两大神器【索引和锁】](https://juejin.im/post/5b55b842f265da0f9e589e79)

## 什么是覆盖索引?

如果一个索引包含（或者说覆盖）所有需要查询的字段的值，
我们就称 之为“覆盖索引”。我们知道在InnoDB存储引擎中，如果不是主键索引，
叶子节点存储的是主键+列值。

最终还是要“回表”，也就是要通过主键再查找一次,这样就会比较慢。
覆盖索引就是把要查询出的列和索引是对应的，不做回表操作！

